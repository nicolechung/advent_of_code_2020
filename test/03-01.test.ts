import {
  createMap,
  getHeight,
  getWidth,
  moveAndCount,
  answer,
  moveAndCountForSlope,
  product,
  partTwoAnswer,
} from '../src/03-01';

describe('Day 3 tests', () => {
  it('can create a two dimensional  of the inputs', () => {
    const map = `..##.......
        #...#...#..
        .#....#..#.
        ..#.#...#.#
        .#...##..#.
        ..#.##.....
        .#.#.#....#
        .#........#
        #.##...#...
        #...##....#
        .#..#...#.#`;
    expect(createMap(map)).toEqual([
      ['.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.'],
      ['.', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '.', '.', '.', '#', '.', '#'],
      ['.', '#', '.', '.', '.', '#', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.'],
      ['.', '#', '.', '#', '.', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
      ['#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '#'],
    ]);
  });

  it('can return the height of the map', () => {
    const map = [
      ['.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.'],
      ['.', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '.', '.', '.', '#', '.', '#'],
      ['.', '#', '.', '.', '.', '#', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.'],
      ['.', '#', '.', '#', '.', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
      ['#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '#'],
    ];
    expect(getHeight(map)).toEqual(11);
  });
  it('can return the width of the map', () => {
    // expects the width of all rows to be the same
    const map = [
      ['.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.'],
      ['.', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '.', '.', '.', '#', '.', '#'],
      ['.', '#', '.', '.', '.', '#', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.'],
      ['.', '#', '.', '#', '.', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
      ['#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '#'],
    ];
    expect(getWidth(map)).toEqual(11);
  });

  it('can move and count trees', () => {
    const map = [
      ['.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.'],
      ['.', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '.', '.', '.', '#', '.', '#'],
      ['.', '#', '.', '.', '.', '#', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.'],
      ['.', '#', '.', '#', '.', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
      ['#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '#'],
    ];
    expect(moveAndCount(map)).toEqual(7);
  });
  it('returns the answer for part 1', () => {
    expect(answer).toMatchInlineSnapshot(`159`);
  });
  it('finds the right number of trees given a slope', () => {
    const map = [
      ['.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.'],
      ['.', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '.', '.', '.', '#', '.', '#'],
      ['.', '#', '.', '.', '.', '#', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.'],
      ['.', '#', '.', '#', '.', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
      ['#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '#'],
    ];
    expect(moveAndCountForSlope(map, [3, 1])).toEqual(7);
  });

  it('finds the product given a set of slopes', () => {
    const map = [
      ['.', '.', '#', '#', '.', '.', '.', '.', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '.', '.', '.', '#', '.', '.'],
      ['.', '#', '.', '.', '.', '.', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '.', '.', '.', '#', '.', '#'],
      ['.', '#', '.', '.', '.', '#', '#', '.', '.', '#', '.'],
      ['.', '.', '#', '.', '#', '#', '.', '.', '.', '.', '.'],
      ['.', '#', '.', '#', '.', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '.', '.', '.', '.', '.', '.', '#'],
      ['#', '.', '#', '#', '.', '.', '.', '#', '.', '.', '.'],
      ['#', '.', '.', '.', '#', '#', '.', '.', '.', '.', '#'],
      ['.', '#', '.', '.', '#', '.', '.', '.', '#', '.', '#'],
    ];
    expect(
      product(map, [
        [1, 1],
        [3, 1],
        [5, 1],
        [7, 1],
        [1, 2],
      ])
    ).toEqual(336);
  });
  it('has an answer for part two', () => {
    expect(partTwoAnswer).toMatchInlineSnapshot(`6419669520`);
  });
});
